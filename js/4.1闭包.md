## 闭包
1. 如何产生闭包?
   1. 当一个嵌套的内部（子）函数引用了嵌套的外部（父）函数的变量（函数）时，就产生了闭包
   2. 闭包到底是什么？
      1. 使用chrome调试查看
      2. 闭包是嵌套的内部函数
      3. 包含被引用变量（函数）的对象
      4. 闭包存在于嵌套的内部函数中
   3. 产生闭包的条件
      1. 函数嵌套
      2. 内部函数引用了外部函数的数据（变量/函数）
      3. 执行外部函数

```js
<script>
    function fn1(){
        var a = 2
        // 执行函数定义就会产生闭包
        // 内部函数不一定调用
        function fn2(){
            console.log(a);
        }
    }
    fn1()

</script>
```

## 常见的闭包
1. 将函数作为另一个函数的返回值
```js
<script>
    function fn1(){
        // 此时闭包就已经产生了（函数提升，内部函数对象已经创建了）
        var a = 2
        function fn2(){
            a++
            console.log(a);
        }
        return fn2
    }
   var f = fn1()
   f()//3
   f()//4
//  闭包死亡（包含闭包的函数对象成为垃圾对象）
   f = null
</script>
```
2. 将函数作为实参传递给另一个函数调用
```js
<script>
   function showDelay(msg,time){
       setTimeout(function(){
           alert(msg)
       },time)
   }
   showDelay('kary',2000)
</script>
```

## 闭包的作用
1. 使用函数内部的变量在函数执行完后，仍然存活在内存中（延长了局部变量的生命周期）
2. 让函数外部可以操作（读写）到函数内部的数据（变量/函数）
3. 函数执行完后，函数内部声明的局部变量一般是不存在，但当存在闭包函数中的变量才可能存在
4. 在函数外部不能直接访问函数内部的局部变量，但可以通过闭包让外部操作它
5. 闭包的产生：在嵌套内部函数定义执行完时就产生了（不是调用）
6. 闭包的死亡：在嵌套的内部函数成为垃圾对象时